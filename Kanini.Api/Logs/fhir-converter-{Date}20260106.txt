2026-01-06 11:11:57 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-06 11:11:57 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-06 11:11:57 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 11:11:57 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-06 11:11:57 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-06 11:11:57 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-06 11:11:57 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 11:11:57 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-06 11:11:57 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-06 11:11:57 [INF] Applying migration '20260106054144_InitialCreate'.
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Organizations] (
    [OrganizationId] uniqueidentifier NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-06 11:11:57 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PatientIdentifiers] (
    [Id] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] uniqueidentifier NOT NULL,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationId] uniqueidentifier NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 11:11:57 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] uniqueidentifier NOT NULL,
    [RequestingOrganizationId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] uniqueidentifier NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-06 11:11:57 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260106054144_InitialCreate', N'10.0.1');
2026-01-06 11:11:57 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-06 11:28:19 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 11:28:19 [INF] Now listening on: http://localhost:5201
2026-01-06 11:28:19 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 11:28:19 [INF] Hosting environment: Development
2026-01-06 11:28:19 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 11:30:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-06 11:30:37 [WRN] Failed to determine the https port for redirect.
2026-01-06 11:30:37 [INF] CORS policy execution successful.
2026-01-06 11:30:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 74.4163ms
2026-01-06 11:30:37 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 138
2026-01-06 11:30:37 [INF] CORS policy execution successful.
2026-01-06 11:30:37 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 11:30:37 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 11:30:37 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:30:42 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:30:42 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:30:42 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-06 11:30:42 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 5116.5992ms
2026-01-06 11:30:42 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 11:30:42 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 5233.9056ms
2026-01-06 11:31:07 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-06 11:31:07 [INF] CORS policy execution successful.
2026-01-06 11:31:07 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 7.2349ms
2026-01-06 11:31:07 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 358
2026-01-06 11:31:07 [INF] CORS policy execution successful.
2026-01-06 11:31:07 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 11:31:07 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 11:31:07 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:31:09 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-06 11:31:09 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 300), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 150), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [ContactPhone] = @p1, [CreatedBy] = @p2, [Name] = @p3
OUTPUT 1
WHERE [OrganizationId] = @p4;
INSERT INTO [Users] ([UserId], [CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 11:31:09 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: "f90274ac-51c7-4ee6-a823-08de4ce8fccc"
2026-01-06 11:31:09 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-06 11:31:09 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 1558.3411ms
2026-01-06 11:31:09 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 11:31:09 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 1647.932ms
2026-01-06 11:31:46 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 11:31:46 [INF] CORS policy execution successful.
2026-01-06 11:31:46 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 4.8609ms
2026-01-06 11:31:46 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 11:31:46 [INF] CORS policy execution successful.
2026-01-06 11:31:46 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 11:31:46 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 11:31:46 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:31:46 [INF] Executed DbCommand (6ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 11:31:46 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "f90274ac-51c7-4ee6-a823-08de4ce8fccc"
2026-01-06 11:31:46 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 11:31:46 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 164.2021ms
2026-01-06 11:31:46 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 11:31:46 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 267.9582ms
2026-01-06 11:36:45 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 11:36:45 [INF] CORS policy execution successful.
2026-01-06 11:36:45 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 6.8193ms
2026-01-06 11:36:45 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 11:36:45 [INF] CORS policy execution successful.
2026-01-06 11:36:45 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 11:36:45 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 11:36:45 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 11:36:45 [INF] Executed DbCommand (7ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 11:36:45 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "f90274ac-51c7-4ee6-a823-08de4ce8fccc"
2026-01-06 11:36:45 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 11:36:45 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 53.475ms
2026-01-06 11:36:45 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 11:36:45 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 72.8914ms
2026-01-06 12:01:04 [INF] Application is shutting down...
2026-01-06 12:06:16 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 12:06:16 [INF] Now listening on: http://localhost:5201
2026-01-06 12:06:16 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 12:06:16 [INF] Hosting environment: Development
2026-01-06 12:06:16 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 12:06:53 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 12:06:53 [WRN] Failed to determine the https port for redirect.
2026-01-06 12:06:53 [INF] CORS policy execution successful.
2026-01-06 12:06:53 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 129.7409ms
2026-01-06 12:06:53 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 12:06:53 [INF] CORS policy execution successful.
2026-01-06 12:06:53 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:06:53 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 12:06:53 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:06:56 [ERR] Failed executing DbCommand (77ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2), @p20='?' (DbType = Guid), @p10='?' (Size = 100), @p11='?' (DbType = DateTime2), @p12='?' (Size = 150), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p16='?' (Size = 256), @p17='?' (DbType = Int32), @p18='?' (Size = 100), @p19='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [Users] SET [CreatedBy] = @p10, [CreatedOn] = @p11, [Email] = @p12, [IsActive] = @p13, [LastLogin] = @p14, [OrganizationId] = @p15, [PasswordHash] = @p16, [Role] = @p17, [UpdatedBy] = @p18, [UpdatedOn] = @p19
OUTPUT 1
WHERE [UserId] = @p20;
2026-01-06 12:06:57 [ERR] An exception occurred in the database while saving changes for context type 'Kanini.Data.DatabaseContext.FhirConverterDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ContactEmail', table 'FhirConverterDb.dbo.Organizations'; column does not allow nulls. INSERT fails.
The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Users_Organizations_OrganizationId". The conflict occurred in database "FhirConverterDb", table "dbo.Organizations", column 'OrganizationId'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:341d4fbe-9d63-4480-a32c-d47c1c119979
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ContactEmail', table 'FhirConverterDb.dbo.Organizations'; column does not allow nulls. INSERT fails.
The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Users_Organizations_OrganizationId". The conflict occurred in database "FhirConverterDb", table "dbo.Organizations", column 'OrganizationId'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:341d4fbe-9d63-4480-a32c-d47c1c119979
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-06 12:06:57 [ERR] Error updating user with ID "f90274ac-51c7-4ee6-a823-08de4ce8fccc"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ContactEmail', table 'FhirConverterDb.dbo.Organizations'; column does not allow nulls. INSERT fails.
The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Users_Organizations_OrganizationId". The conflict occurred in database "FhirConverterDb", table "dbo.Organizations", column 'OrganizationId'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:341d4fbe-9d63-4480-a32c-d47c1c119979
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Kanini.Data.Repositories.Users.UserRepository.UpdateAsync(User user) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserRepository.cs:line 55
2026-01-06 12:06:57 [ERR] Login failed for email: sujithkumarsenthilkumar777@gmail.com, Error: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ContactEmail', table 'FhirConverterDb.dbo.Organizations'; column does not allow nulls. INSERT fails.
The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Users_Organizations_OrganizationId". The conflict occurred in database "FhirConverterDb", table "dbo.Organizations", column 'OrganizationId'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:341d4fbe-9d63-4480-a32c-d47c1c119979
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Kanini.Data.Repositories.Users.UserRepository.UpdateAsync(User user) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserRepository.cs:line 55
   at Kanini.Application.Services.Users.AuthService.LoginAsync(LoginRequestDto request) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Users\AuthService.cs:line 210
2026-01-06 12:06:57 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 12:06:57 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 4040.1492ms
2026-01-06 12:06:57 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:06:57 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 400 null application/json; charset=utf-8 4411.6639ms
2026-01-06 12:09:04 [INF] Application is shutting down...
2026-01-06 12:09:14 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 12:09:14 [INF] Now listening on: http://localhost:5201
2026-01-06 12:09:14 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 12:09:14 [INF] Hosting environment: Development
2026-01-06 12:09:14 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 12:09:16 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 12:09:16 [WRN] Failed to determine the https port for redirect.
2026-01-06 12:09:16 [INF] CORS policy execution successful.
2026-01-06 12:09:16 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 108.0893ms
2026-01-06 12:09:16 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 12:09:16 [INF] CORS policy execution successful.
2026-01-06 12:09:16 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:09:17 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 12:09:18 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:09:21 [INF] Executed DbCommand (12ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 12:09:21 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "f90274ac-51c7-4ee6-a823-08de4ce8fccc"
2026-01-06 12:09:21 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 12:09:21 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 4309.1566ms
2026-01-06 12:09:21 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:09:21 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 4856.2606ms
2026-01-06 12:25:12 [INF] Application is shutting down...
2026-01-06 12:31:56 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 12:31:56 [INF] Now listening on: http://localhost:5201
2026-01-06 12:31:56 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 12:31:56 [INF] Hosting environment: Development
2026-01-06 12:31:56 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 12:32:34 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - null null
2026-01-06 12:32:35 [WRN] Failed to determine the https port for redirect.
2026-01-06 12:32:35 [INF] CORS policy execution successful.
2026-01-06 12:32:35 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - 204 null null 170.6424ms
2026-01-06 12:32:35 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - application/json 162
2026-01-06 12:32:35 [INF] CORS policy execution successful.
2026-01-06 12:32:35 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-06 12:32:35 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-06 12:32:35 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - 401 0 null 122.9333ms
2026-01-06 12:33:29 [INF] Application is shutting down...
2026-01-06 12:34:18 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-06 12:34:18 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-06 12:34:18 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 12:34:18 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-06 12:34:18 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-06 12:34:18 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-06 12:34:18 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 12:34:18 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-06 12:34:18 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-06 12:34:18 [INF] Applying migration '20260106070400_InitialCreate'.
2026-01-06 12:34:18 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Organizations] (
    [OrganizationId] uniqueidentifier NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-06 12:34:18 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PatientIdentifiers] (
    [Id] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 12:34:18 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] uniqueidentifier NOT NULL,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationId] uniqueidentifier NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 12:34:18 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] uniqueidentifier NOT NULL,
    [RequestingOrganizationId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] uniqueidentifier NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 12:34:18 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-06 12:34:18 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-06 12:34:18 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260106070400_InitialCreate', N'10.0.1');
2026-01-06 12:34:18 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-06 12:35:27 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 12:35:27 [INF] Now listening on: http://localhost:5201
2026-01-06 12:35:27 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 12:35:27 [INF] Hosting environment: Development
2026-01-06 12:35:27 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 12:35:34 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-06 12:35:34 [WRN] Failed to determine the https port for redirect.
2026-01-06 12:35:34 [INF] CORS policy execution successful.
2026-01-06 12:35:34 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 129.2223ms
2026-01-06 12:35:34 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 138
2026-01-06 12:35:34 [INF] CORS policy execution successful.
2026-01-06 12:35:34 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 12:35:34 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 12:35:35 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:35:41 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:35:41 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:35:41 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-06 12:35:41 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 6985.7665ms
2026-01-06 12:35:41 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 12:35:41 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 7183.7695ms
2026-01-06 12:35:54 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-06 12:35:54 [INF] CORS policy execution successful.
2026-01-06 12:35:54 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 44.7828ms
2026-01-06 12:35:54 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 358
2026-01-06 12:35:54 [INF] CORS policy execution successful.
2026-01-06 12:35:54 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 12:35:54 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 12:35:54 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:35:56 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-06 12:35:56 [INF] Executed DbCommand (18ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 300), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 150), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [ContactPhone] = @p1, [CreatedBy] = @p2, [Name] = @p3
OUTPUT 1
WHERE [OrganizationId] = @p4;
INSERT INTO [Users] ([UserId], [CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 12:35:56 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: "27992d1e-44ad-4524-adc7-08de4cf209d6"
2026-01-06 12:35:56 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-06 12:35:56 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 2409.2088ms
2026-01-06 12:35:56 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 12:35:56 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 2473.7173ms
2026-01-06 12:36:14 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 12:36:14 [INF] CORS policy execution successful.
2026-01-06 12:36:14 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 10.0755ms
2026-01-06 12:36:14 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 12:36:14 [INF] CORS policy execution successful.
2026-01-06 12:36:14 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:36:14 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 12:36:14 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 12:36:14 [INF] Executed DbCommand (20ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 12:36:14 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "27992d1e-44ad-4524-adc7-08de4cf209d6"
2026-01-06 12:36:14 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 12:36:15 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 440.0327ms
2026-01-06 12:36:15 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 12:36:15 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 603.6546ms
2026-01-06 12:36:29 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - null null
2026-01-06 12:36:29 [INF] CORS policy execution successful.
2026-01-06 12:36:29 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - 204 null null 24.3905ms
2026-01-06 12:36:29 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - application/json 162
2026-01-06 12:36:29 [INF] CORS policy execution successful.
2026-01-06 12:36:29 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-06 12:36:29 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-06 12:36:29 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - 401 0 null 92.7999ms
2026-01-06 12:38:34 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - null null
2026-01-06 12:38:34 [INF] CORS policy execution successful.
2026-01-06 12:38:34 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - 204 null null 12.6428ms
2026-01-06 12:38:34 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - application/json 162
2026-01-06 12:38:34 [INF] CORS policy execution successful.
2026-01-06 12:38:34 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api)'
2026-01-06 12:38:34 [INF] Route matched with {action = "CreatePatientIdentifier", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePatientIdentifier(Kanini.Application.DTOs.Patients.CreatePatientRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:38:34 [INF] Patient creation started for GlobalId: "94d59a84-062c-4ebf-8585-3bb7dbf9db91"
2026-01-06 12:38:34 [INF] Patient search started with criteria: FirstName=SUJITH, LastName=S
2026-01-06 12:38:34 [INF] Patient search completed, found 0 results
2026-01-06 12:38:34 [INF] Patient creation started for GlobalId: "95cc9ffd-cd59-448b-b645-10b45cb3334b"
2026-01-06 12:38:34 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 64), @p5='?' (Size = 200), @p6='?' (Size = 64), @p7='?' (DbType = Guid), @p8='?' (Size = 200), @p9='?' (Size = 64), @p10='?' (Size = 200), @p11='?' (DbType = Guid), @p12='?' (Size = 100), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientIdentifiers] ([Id], [CreatedBy], [CreatedOn], [DateOfBirth], [DateOfBirthHash], [FirstName], [FirstNameHash], [GlobalPatientId], [LastName], [LastNameHash], [LocalPatientId], [SourceOrganizationId], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-06 12:38:34 [INF] Patient created successfully with ID: "c4b47c20-15eb-40da-9e5a-08de4cf26829"
2026-01-06 12:38:34 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Patients.PatientResponseDto'.
2026-01-06 12:38:34 [INF] Executed action Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api) in 565.5478ms
2026-01-06 12:38:34 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api)'
2026-01-06 12:38:34 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - 200 null application/json; charset=utf-8 703.9207ms
2026-01-06 12:39:45 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?firstName=SUJITH&lastName=S&dateOfBirth=2002-10-23 - null null
2026-01-06 12:39:45 [INF] CORS policy execution successful.
2026-01-06 12:39:45 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:39:45 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:39:45 [INF] Patient search started with criteria: FirstName=SUJITH, LastName=S
2026-01-06 12:39:45 [INF] Patient search started with criteria: FirstName=SUJITH, LastName=S
2026-01-06 12:39:46 [INF] Patient search completed, found 1 results
2026-01-06 12:39:46 [INF] Patient search completed, found 1 results
2026-01-06 12:39:46 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:39:46 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 162.6204ms
2026-01-06 12:39:46 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:39:46 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?firstName=SUJITH&lastName=S&dateOfBirth=2002-10-23 - 200 null application/json; charset=utf-8 257.8787ms
2026-01-06 12:39:59 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?firstName=SUJITH&lastName=KUMAR%20S&dateOfBirth=2002-10-23 - null null
2026-01-06 12:39:59 [INF] CORS policy execution successful.
2026-01-06 12:39:59 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:39:59 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:39:59 [INF] Patient search started with criteria: FirstName=SUJITH, LastName=KUMAR S
2026-01-06 12:39:59 [INF] Patient search started with criteria: FirstName=SUJITH, LastName=KUMAR S
2026-01-06 12:39:59 [INF] Patient search completed, found 0 results
2026-01-06 12:39:59 [INF] Patient search completed, found 0 results
2026-01-06 12:39:59 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:39:59 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 40.8662ms
2026-01-06 12:39:59 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:39:59 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?firstName=SUJITH&lastName=KUMAR%20S&dateOfBirth=2002-10-23 - 200 null application/json; charset=utf-8 69.009ms
2026-01-06 12:46:42 [INF] Application is shutting down...
2026-01-06 12:48:18 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 12:48:18 [INF] Now listening on: http://localhost:5201
2026-01-06 12:48:18 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 12:48:18 [INF] Hosting environment: Development
2026-01-06 12:48:18 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 12:48:41 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujth - null null
2026-01-06 12:48:41 [WRN] Failed to determine the https port for redirect.
2026-01-06 12:48:41 [INF] CORS policy execution successful.
2026-01-06 12:48:41 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:48:41 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:48:42 [INF] Patient search started with term: sujth
2026-01-06 12:48:42 [INF] Patient search started with term: sujth
2026-01-06 12:48:42 [INF] Patient search completed, found 0 results
2026-01-06 12:48:42 [INF] Patient search completed, found 0 results
2026-01-06 12:48:42 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:48:43 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 1070.8668ms
2026-01-06 12:48:43 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:48:43 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujth - 200 null application/json; charset=utf-8 1598.3801ms
2026-01-06 12:48:59 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=suj - null null
2026-01-06 12:48:59 [INF] CORS policy execution successful.
2026-01-06 12:48:59 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:48:59 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:48:59 [INF] Patient search started with term: suj
2026-01-06 12:48:59 [INF] Patient search started with term: suj
2026-01-06 12:48:59 [INF] Patient search completed, found 0 results
2026-01-06 12:48:59 [INF] Patient search completed, found 0 results
2026-01-06 12:48:59 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:48:59 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 46.579ms
2026-01-06 12:48:59 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:48:59 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=suj - 200 null application/json; charset=utf-8 93.2992ms
2026-01-06 12:49:00 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=suj - null null
2026-01-06 12:49:00 [INF] CORS policy execution successful.
2026-01-06 12:49:00 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:00 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:49:00 [INF] Patient search started with term: suj
2026-01-06 12:49:00 [INF] Patient search started with term: suj
2026-01-06 12:49:00 [INF] Patient search completed, found 0 results
2026-01-06 12:49:00 [INF] Patient search completed, found 0 results
2026-01-06 12:49:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:49:00 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 41.7028ms
2026-01-06 12:49:00 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:00 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=suj - 200 null application/json; charset=utf-8 82.2023ms
2026-01-06 12:49:04 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujth - null null
2026-01-06 12:49:04 [INF] CORS policy execution successful.
2026-01-06 12:49:04 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:04 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:49:04 [INF] Patient search started with term: sujth
2026-01-06 12:49:04 [INF] Patient search started with term: sujth
2026-01-06 12:49:04 [INF] Patient search completed, found 0 results
2026-01-06 12:49:04 [INF] Patient search completed, found 0 results
2026-01-06 12:49:04 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:49:04 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 23.4956ms
2026-01-06 12:49:04 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:04 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujth - 200 null application/json; charset=utf-8 48.8509ms
2026-01-06 12:49:14 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujith - null null
2026-01-06 12:49:14 [INF] CORS policy execution successful.
2026-01-06 12:49:14 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:14 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:49:14 [INF] Patient search started with term: sujith
2026-01-06 12:49:14 [INF] Patient search started with term: sujith
2026-01-06 12:49:14 [INF] Patient search completed, found 0 results
2026-01-06 12:49:14 [INF] Patient search completed, found 0 results
2026-01-06 12:49:14 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:49:14 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 41.8211ms
2026-01-06 12:49:14 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:14 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujith - 200 null application/json; charset=utf-8 64.7444ms
2026-01-06 12:49:15 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujith - null null
2026-01-06 12:49:15 [INF] CORS policy execution successful.
2026-01-06 12:49:15 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:15 [INF] Route matched with {action = "SearchPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchPatients(Kanini.Application.DTOs.Patients.PatientSearchRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 12:49:15 [INF] Patient search started with term: sujith
2026-01-06 12:49:15 [INF] Patient search started with term: sujith
2026-01-06 12:49:15 [INF] Patient search completed, found 0 results
2026-01-06 12:49:15 [INF] Patient search completed, found 0 results
2026-01-06 12:49:15 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 12:49:15 [INF] Executed action Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api) in 21.9556ms
2026-01-06 12:49:15 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.SearchPatients (Kanini.Api)'
2026-01-06 12:49:15 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/search?searchTerm=sujith - 200 null application/json; charset=utf-8 76.2795ms
2026-01-06 13:01:21 [INF] Application is shutting down...
2026-01-06 14:49:56 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 14:49:57 [INF] Now listening on: http://localhost:5201
2026-01-06 14:49:57 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 14:49:57 [INF] Hosting environment: Development
2026-01-06 14:49:57 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 14:50:04 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 14:50:04 [WRN] Failed to determine the https port for redirect.
2026-01-06 14:50:04 [INF] CORS policy execution successful.
2026-01-06 14:50:04 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 139.2498ms
2026-01-06 14:50:04 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 14:50:04 [INF] CORS policy execution successful.
2026-01-06 14:50:04 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 14:50:04 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 14:50:05 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 14:50:07 [INF] Executed DbCommand (16ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 14:50:07 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "27992d1e-44ad-4524-adc7-08de4cf209d6"
2026-01-06 14:50:07 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 14:50:07 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 3227.5148ms
2026-01-06 14:50:07 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 14:50:07 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 3619.4257ms
2026-01-06 14:50:20 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 14:50:20 [INF] CORS policy execution successful.
2026-01-06 14:50:20 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 14:50:20 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 14:50:20 [INF] Getting all patients
2026-01-06 14:50:20 [INF] Getting all patients
2026-01-06 14:50:20 [INF] Retrieved 1 patients
2026-01-06 14:50:21 [INF] Retrieved 1 patients
2026-01-06 14:50:21 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 14:50:21 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 213.9979ms
2026-01-06 14:50:21 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 14:50:21 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 279.8467ms
2026-01-06 15:13:12 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 15:13:12 [INF] CORS policy execution successful.
2026-01-06 15:13:12 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:13:12 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 15:13:12 [INF] Getting all patients
2026-01-06 15:13:12 [INF] Getting all patients
2026-01-06 15:13:12 [INF] Retrieved 1 patients
2026-01-06 15:13:12 [INF] Retrieved 1 patients
2026-01-06 15:13:12 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 15:13:12 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 35.2364ms
2026-01-06 15:13:12 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:13:12 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 75.9399ms
2026-01-06 15:26:12 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 15:26:12 [INF] CORS policy execution successful.
2026-01-06 15:26:12 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:26:12 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 15:26:12 [INF] Getting all patients
2026-01-06 15:26:12 [INF] Getting all patients
2026-01-06 15:26:12 [INF] Retrieved 1 patients
2026-01-06 15:26:12 [INF] Retrieved 1 patients
2026-01-06 15:26:12 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 15:26:12 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 19.1137ms
2026-01-06 15:26:12 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:26:12 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 32.547ms
2026-01-06 15:36:50 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 15:36:51 [INF] CORS policy execution successful.
2026-01-06 15:36:51 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:36:51 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 15:36:51 [INF] Getting all patients
2026-01-06 15:36:51 [INF] Getting all patients
2026-01-06 15:36:51 [INF] Retrieved 1 patients
2026-01-06 15:36:51 [INF] Retrieved 1 patients
2026-01-06 15:36:51 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 15:36:51 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 228.9717ms
2026-01-06 15:36:51 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:36:51 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 922.5714ms
2026-01-06 15:40:23 [INF] Application is shutting down...
2026-01-06 15:40:40 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 15:40:40 [INF] Now listening on: http://localhost:5201
2026-01-06 15:40:40 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 15:40:40 [INF] Hosting environment: Development
2026-01-06 15:40:40 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 15:40:45 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 15:40:45 [WRN] Failed to determine the https port for redirect.
2026-01-06 15:40:45 [INF] CORS policy execution successful.
2026-01-06 15:40:45 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:40:45 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 15:40:46 [INF] Getting all patients
2026-01-06 15:40:46 [INF] Getting all patients
2026-01-06 15:40:46 [INF] Retrieved 1 patients
2026-01-06 15:40:47 [INF] Retrieved 1 patients
2026-01-06 15:40:47 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 15:40:47 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 1456.0276ms
2026-01-06 15:40:47 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 15:40:47 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 2003.9778ms
2026-01-06 15:47:22 [INF] Application is shutting down...
2026-01-06 16:54:28 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 16:54:28 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 16:55:10 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 16:55:10 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 16:55:11 [INF] Executed DbCommand (211ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-06 16:55:11 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-06 16:55:11 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 16:55:11 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-06 16:55:11 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-06 16:55:11 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-06 16:55:12 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-06 16:55:12 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-06 16:55:12 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-06 16:55:12 [INF] Applying migration '20260106112429_InitialCreate'.
2026-01-06 16:55:12 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Organizations] (
    [OrganizationId] uniqueidentifier NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-06 16:55:12 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PatientIdentifiers] (
    [Id] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 16:55:12 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] uniqueidentifier NOT NULL,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationId] uniqueidentifier NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-06 16:55:12 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] uniqueidentifier NOT NULL,
    [RequestingOrganizationId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] uniqueidentifier NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [OrganizationId] uniqueidentifier NULL,
    [OrganizationId1] uniqueidentifier NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]),
    CONSTRAINT [FK_DataRequests_Organizations_OrganizationId1] FOREIGN KEY ([OrganizationId1]) REFERENCES [Organizations] ([OrganizationId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 16:55:12 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-06 16:55:12 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_ExpiresAt] ON [DataRequests] ([ExpiresAt]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_OrganizationId] ON [DataRequests] ([OrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_OrganizationId1] ON [DataRequests] ([OrganizationId1]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_Patient_Organizations] ON [DataRequests] ([GlobalPatientId], [RequestingOrganizationId], [SourceOrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_Status] ON [DataRequests] ([Status]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-06 16:55:12 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-06 16:55:12 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260106112429_InitialCreate', N'10.0.1');
2026-01-06 16:55:12 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-06 16:57:05 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 16:57:05 [INF] Now listening on: http://localhost:5201
2026-01-06 16:57:05 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 16:57:05 [INF] Hosting environment: Development
2026-01-06 16:57:05 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 16:57:08 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-06 16:57:09 [WRN] Failed to determine the https port for redirect.
2026-01-06 16:57:09 [INF] CORS policy execution successful.
2026-01-06 16:57:09 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 191.1058ms
2026-01-06 16:57:09 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 138
2026-01-06 16:57:09 [INF] CORS policy execution successful.
2026-01-06 16:57:09 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 16:57:09 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 16:57:10 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:15 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:15 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:15 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-06 16:57:15 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 5792.8698ms
2026-01-06 16:57:15 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 16:57:15 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 6053.3865ms
2026-01-06 16:57:41 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-06 16:57:41 [INF] CORS policy execution successful.
2026-01-06 16:57:41 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 12.7789ms
2026-01-06 16:57:41 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 358
2026-01-06 16:57:41 [INF] CORS policy execution successful.
2026-01-06 16:57:41 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 16:57:41 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 16:57:41 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:41 [WRN] Invalid OTP verification attempt for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:41 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 16:57:41 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 70.6593ms
2026-01-06 16:57:41 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 16:57:41 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 400 null application/json; charset=utf-8 141.4578ms
2026-01-06 16:57:44 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 358
2026-01-06 16:57:44 [INF] CORS policy execution successful.
2026-01-06 16:57:44 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 16:57:44 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 16:57:44 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:57:45 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 16:57:46 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 16:57:47 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-06 16:57:47 [INF] Executed DbCommand (21ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 300), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 150), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [ContactPhone] = @p1, [CreatedBy] = @p2, [Name] = @p3
OUTPUT 1
WHERE [OrganizationId] = @p4;
INSERT INTO [Users] ([UserId], [CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 16:57:47 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 16:57:47 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-06 16:57:47 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 2780.9663ms
2026-01-06 16:57:47 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 16:57:47 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 2841.5283ms
2026-01-06 16:58:18 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 16:58:18 [INF] CORS policy execution successful.
2026-01-06 16:58:18 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 7.0048ms
2026-01-06 16:58:18 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 16:58:18 [INF] CORS policy execution successful.
2026-01-06 16:58:19 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 16:58:19 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 16:58:19 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 16:58:19 [INF] Executed DbCommand (20ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 16:58:19 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 16:58:19 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 16:58:19 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 346.7983ms
2026-01-06 16:58:19 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 16:58:19 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 526.1338ms
2026-01-06 16:58:27 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - null null
2026-01-06 16:58:27 [INF] CORS policy execution successful.
2026-01-06 16:58:27 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/patients/identifiers - 204 null null 11.3992ms
2026-01-06 16:58:27 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - application/json 162
2026-01-06 16:58:27 [INF] CORS policy execution successful.
2026-01-06 16:58:27 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api)'
2026-01-06 16:58:27 [INF] Route matched with {action = "CreatePatientIdentifier", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePatientIdentifier(Kanini.Application.DTOs.Patients.CreatePatientRequestDto) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 16:58:27 [INF] Patient creation started for GlobalId: "435482d4-6dd6-4d43-b6f0-bdffea85ed6a"
2026-01-06 16:58:27 [INF] Patient creation started for GlobalId: "b2faadec-73ee-45a9-90fa-fffbf125ec50"
2026-01-06 16:58:27 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 64), @p5='?' (Size = 200), @p6='?' (Size = 64), @p7='?' (DbType = Guid), @p8='?' (Size = 200), @p9='?' (Size = 64), @p10='?' (Size = 200), @p11='?' (DbType = Guid), @p12='?' (Size = 100), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientIdentifiers] ([Id], [CreatedBy], [CreatedOn], [DateOfBirth], [DateOfBirthHash], [FirstName], [FirstNameHash], [GlobalPatientId], [LastName], [LastNameHash], [LocalPatientId], [SourceOrganizationId], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-06 16:58:27 [INF] Patient created successfully with ID: "01d5c329-3a3a-4714-064d-08de4d16b60c"
2026-01-06 16:58:27 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Patients.PatientResponseDto'.
2026-01-06 16:58:27 [INF] Executed action Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api) in 266.3137ms
2026-01-06 16:58:27 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.CreatePatientIdentifier (Kanini.Api)'
2026-01-06 16:58:27 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/patients/identifiers - 200 null application/json; charset=utf-8 332.5957ms
2026-01-06 16:58:38 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 16:58:38 [INF] CORS policy execution successful.
2026-01-06 16:58:38 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 16:58:38 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 16:58:38 [INF] Getting all patients
2026-01-06 16:58:38 [INF] Getting all patients
2026-01-06 16:58:38 [INF] Retrieved 1 patients
2026-01-06 16:58:39 [INF] Retrieved 1 patients
2026-01-06 16:58:39 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 16:58:39 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 101.9302ms
2026-01-06 16:58:39 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 16:58:39 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 431.929ms
2026-01-06 17:03:30 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:03:30 [INF] CORS policy execution successful.
2026-01-06 17:03:30 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 404 0 null 12.5711ms
2026-01-06 17:03:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5201/api/data-requests, Response status code: 404
2026-01-06 17:03:48 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:03:48 [INF] CORS policy execution successful.
2026-01-06 17:03:48 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 404 0 null 7.2541ms
2026-01-06 17:03:48 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5201/api/data-requests, Response status code: 404
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger - null null
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger - 301 0 null 7.9326ms
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/index.html - null null
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/index.html - 200 null text/html;charset=utf-8 121.8875ms
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui.css - null null
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui.css - 200 23649 text/css 20.8969ms
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/index.css - null null
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui-standalone-preset.js - null null
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui-bundle.js - null null
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/index.js - null null
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/index.css - 200 152 text/css 4.6829ms
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui-standalone-preset.js - 200 77354 text/javascript 13.2181ms
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/index.js - 200 null application/javascript;charset=utf-8 14.7289ms
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/swagger-ui-bundle.js - 200 424834 text/javascript 45.0613ms
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - null null
2026-01-06 17:05:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/favicon-32x32.png - null null
2026-01-06 17:05:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/favicon-32x32.png - 200 628 image/png 126.0912ms
2026-01-06 17:05:56 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 805.8679ms
2026-01-06 17:06:15 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:06:15 [INF] CORS policy execution successful.
2026-01-06 17:06:15 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 404 0 null 10.1983ms
2026-01-06 17:06:15 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5201/api/data-requests, Response status code: 404
2026-01-06 17:07:07 [INF] Application is shutting down...
2026-01-06 17:07:26 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:07:27 [INF] Now listening on: http://localhost:5201
2026-01-06 17:07:27 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:07:27 [INF] Hosting environment: Development
2026-01-06 17:07:27 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:07:37 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:07:37 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:07:37 [INF] CORS policy execution successful.
2026-01-06 17:07:37 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:07:37 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:07:38 [INF] Getting all patients
2026-01-06 17:07:38 [INF] Getting all patients
2026-01-06 17:07:38 [INF] Retrieved 1 patients
2026-01-06 17:07:38 [INF] Retrieved 1 patients
2026-01-06 17:07:38 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:07:39 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 1145.0319ms
2026-01-06 17:07:39 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:07:39 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 1733.0093ms
2026-01-06 17:07:45 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:07:45 [INF] CORS policy execution successful.
2026-01-06 17:07:45 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 404 0 null 24.5872ms
2026-01-06 17:07:45 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5201/api/data-requests, Response status code: 404
2026-01-06 17:09:43 [INF] Application is shutting down...
2026-01-06 17:10:52 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:10:52 [INF] Now listening on: http://localhost:5201
2026-01-06 17:10:52 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:10:52 [INF] Hosting environment: Development
2026-01-06 17:10:52 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:10:56 [INF] Application is shutting down...
2026-01-06 17:12:46 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:12:46 [INF] Now listening on: http://localhost:5201
2026-01-06 17:12:46 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:12:46 [INF] Hosting environment: Development
2026-01-06 17:12:46 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:13:04 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:13:04 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:13:04 [INF] CORS policy execution successful.
2026-01-06 17:13:05 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 404 0 null 295.3211ms
2026-01-06 17:13:05 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5201/api/data-requests, Response status code: 404
2026-01-06 17:15:43 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/index.html - null null
2026-01-06 17:15:43 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/index.html - 200 null text/html;charset=utf-8 139.58ms
2026-01-06 17:15:43 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - null null
2026-01-06 17:15:44 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.1384ms
2026-01-06 17:16:10 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/DataRequests?isRequesting=true - null null
2026-01-06 17:16:10 [INF] CORS policy execution successful.
2026-01-06 17:16:10 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:16:10 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:16:10 [ERR] Error getting data requests
System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid[TChar](ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at Kanini.Api.Controllers.DataRequestsController.GetRequests(Boolean isRequesting) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api\Controllers\DataRequestsController.cs:line 59
2026-01-06 17:16:10 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:16:10 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 534.4521ms
2026-01-06 17:16:10 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:16:10 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/DataRequests?isRequesting=true - 500 null application/json; charset=utf-8 627.0743ms
2026-01-06 17:16:46 [INF] Application is shutting down...
2026-01-06 17:17:54 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:17:54 [INF] Now listening on: http://localhost:5201
2026-01-06 17:17:54 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:17:54 [INF] Hosting environment: Development
2026-01-06 17:17:54 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:18:06 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:18:06 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:18:06 [INF] CORS policy execution successful.
2026-01-06 17:18:07 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:18:07 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:18:07 [ERR] Error getting data requests
System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid[TChar](ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at Kanini.Api.Controllers.DataRequestsController.GetRequests(Boolean isRequesting) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api\Controllers\DataRequestsController.cs:line 59
2026-01-06 17:18:07 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:18:07 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 531.188ms
2026-01-06 17:18:07 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:18:07 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 500 null application/json; charset=utf-8 910.8576ms
2026-01-06 17:18:21 [INF] Application is shutting down...
2026-01-06 17:18:43 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:18:44 [INF] Now listening on: http://localhost:5201
2026-01-06 17:18:44 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:18:44 [INF] Hosting environment: Development
2026-01-06 17:18:44 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:18:51 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:18:51 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:18:51 [INF] CORS policy execution successful.
2026-01-06 17:18:51 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 124.2622ms
2026-01-06 17:18:51 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 17:18:51 [INF] CORS policy execution successful.
2026-01-06 17:18:51 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:18:51 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:18:52 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 17:18:53 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 17:18:53 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 17:18:54 [INF] Executed DbCommand (26ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:18:54 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 17:18:54 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:18:54 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 3434.2402ms
2026-01-06 17:18:55 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:18:55 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 3806.3179ms
2026-01-06 17:19:01 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:19:01 [INF] CORS policy execution successful.
2026-01-06 17:19:01 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:19:01 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:19:01 [ERR] Error executing stored procedure: sp_GetDataRequestsByOrganization
Microsoft.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'sp_GetDataRequestsByOrganization'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteReader(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteReaderAsync>b__201_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 66
ClientConnectionId:a7b5a4fb-fa89-42d6-b0ca-f6664b79b918
Error Number:2812,State:62,Class:16
2026-01-06 17:19:02 [ERR] Error getting data requests for organization "f6132a69-6a7a-415e-80ca-60fa43ddbef7"
Microsoft.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'sp_GetDataRequestsByOrganization'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteReader(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteReaderAsync>b__201_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 66
   at Kanini.Data.Repositories.DataRequests.DataRequestReadRepository.GetByOrganizationAsync(Guid organizationId, Boolean isRequesting) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\DataRequests\DataRequestReadRepository.cs:line 23
ClientConnectionId:a7b5a4fb-fa89-42d6-b0ca-f6664b79b918
Error Number:2812,State:62,Class:16
2026-01-06 17:19:02 [ERR] Error getting data requests for organization "f6132a69-6a7a-415e-80ca-60fa43ddbef7"
Microsoft.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'sp_GetDataRequestsByOrganization'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteReader(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteReaderAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteReaderAsync>b__201_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 66
   at Kanini.Data.Repositories.DataRequests.DataRequestReadRepository.GetByOrganizationAsync(Guid organizationId, Boolean isRequesting) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\DataRequests\DataRequestReadRepository.cs:line 23
   at Kanini.Application.Services.DataRequests.DataRequestService.GetRequestsByOrganizationAsync(Guid organizationId, Boolean isRequesting) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\DataRequests\DataRequestService.cs:line 79
ClientConnectionId:a7b5a4fb-fa89-42d6-b0ca-f6664b79b918
Error Number:2812,State:62,Class:16
2026-01-06 17:19:02 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:19:02 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 206.1724ms
2026-01-06 17:19:02 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:19:02 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 400 null application/json; charset=utf-8 291.4671ms
2026-01-06 17:22:15 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:22:15 [INF] CORS policy execution successful.
2026-01-06 17:22:15 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:15 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:22:15 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:22:15 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 104.169ms
2026-01-06 17:22:15 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:15 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 141.6412ms
2026-01-06 17:22:21 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:22:21 [INF] CORS policy execution successful.
2026-01-06 17:22:21 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:21 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:22:21 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:22:21 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 22.8865ms
2026-01-06 17:22:21 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:21 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 200 null application/json; charset=utf-8 50.9903ms
2026-01-06 17:22:22 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:22:22 [INF] CORS policy execution successful.
2026-01-06 17:22:22 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:22 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:22:22 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:22:22 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 6.5168ms
2026-01-06 17:22:22 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:22 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 31.2082ms
2026-01-06 17:22:28 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:22:28 [INF] CORS policy execution successful.
2026-01-06 17:22:28 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:28 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:22:28 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:22:28 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 7.0835ms
2026-01-06 17:22:28 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:22:28 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 31.833ms
2026-01-06 17:24:50 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:24:50 [INF] CORS policy execution successful.
2026-01-06 17:24:50 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 7.0693ms
2026-01-06 17:24:50 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 17:24:50 [INF] CORS policy execution successful.
2026-01-06 17:24:50 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:24:50 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:24:50 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 17:24:50 [INF] Executed DbCommand (12ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:24:50 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 17:24:50 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:24:50 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 251.7886ms
2026-01-06 17:24:50 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:24:50 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 292.4026ms
2026-01-06 17:25:08 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:25:08 [INF] CORS policy execution successful.
2026-01-06 17:25:08 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:25:08 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:25:08 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:25:08 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 32.6564ms
2026-01-06 17:25:08 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:25:08 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 99.4549ms
2026-01-06 17:25:12 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:25:12 [INF] CORS policy execution successful.
2026-01-06 17:25:12 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:25:12 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:25:12 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:25:12 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 6.735ms
2026-01-06 17:25:12 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:25:12 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 30.1953ms
2026-01-06 17:27:58 [INF] Application is shutting down...
2026-01-06 17:28:47 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:28:47 [INF] Now listening on: http://localhost:5201
2026-01-06 17:28:47 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:28:47 [INF] Hosting environment: Development
2026-01-06 17:28:47 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:29:11 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:29:11 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:29:11 [INF] CORS policy execution successful.
2026-01-06 17:29:11 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 117.1287ms
2026-01-06 17:29:11 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 17:29:11 [INF] CORS policy execution successful.
2026-01-06 17:29:11 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:29:11 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:29:12 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 17:29:13 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 17:29:14 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 17:29:15 [INF] Executed DbCommand (26ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:29:15 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 17:29:15 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:29:15 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 3711.8304ms
2026-01-06 17:29:15 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:29:15 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 3994.3617ms
2026-01-06 17:29:33 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:29:33 [INF] CORS policy execution successful.
2026-01-06 17:29:33 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:29:33 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:29:33 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:29:33 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 131.8381ms
2026-01-06 17:29:33 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:29:33 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 298.5911ms
2026-01-06 17:32:19 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:32:19 [INF] CORS policy execution successful.
2026-01-06 17:32:19 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 9.7401ms
2026-01-06 17:32:19 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 17:32:19 [INF] CORS policy execution successful.
2026-01-06 17:32:19 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:32:19 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:32:19 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 17:32:19 [INF] Executed DbCommand (10ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:32:19 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 17:32:19 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:32:19 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 230.837ms
2026-01-06 17:32:19 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:32:19 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 284.2047ms
2026-01-06 17:32:27 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:32:27 [INF] CORS policy execution successful.
2026-01-06 17:32:27 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:32:27 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:32:27 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:32:27 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 45.2601ms
2026-01-06 17:32:27 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:32:27 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 77.4504ms
2026-01-06 17:34:46 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:34:46 [INF] CORS policy execution successful.
2026-01-06 17:34:46 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:34:46 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:34:46 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:34:46 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 47.9105ms
2026-01-06 17:34:46 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:34:46 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 74.5396ms
2026-01-06 17:34:50 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:34:50 [INF] CORS policy execution successful.
2026-01-06 17:34:50 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:34:50 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:34:50 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:34:50 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 7.3315ms
2026-01-06 17:34:50 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:34:50 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 27.5672ms
2026-01-06 17:34:51 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:34:51 [INF] CORS policy execution successful.
2026-01-06 17:34:51 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:34:51 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:34:51 [INF] Getting all patients
2026-01-06 17:34:51 [INF] Getting all patients
2026-01-06 17:34:51 [INF] Retrieved 1 patients
2026-01-06 17:34:52 [INF] Retrieved 1 patients
2026-01-06 17:34:52 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:34:52 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 63.6539ms
2026-01-06 17:34:52 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:34:52 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 106.6481ms
2026-01-06 17:34:55 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/b2faadec-73ee-45a9-90fa-fffbf125ec50/sources - null null
2026-01-06 17:34:55 [INF] CORS policy execution successful.
2026-01-06 17:34:55 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api)'
2026-01-06 17:34:55 [INF] Route matched with {action = "GetPatientSources", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientSources(System.Guid) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:34:55 [ERR] Error executing stored procedure: sp_GetPatientsByGlobalIdAllSources
System.IndexOutOfRangeException: OrganizationName
   at Microsoft.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName)
   at Microsoft.Data.SqlClient.SqlDataReader.GetOrdinal(String name)
   at System.Data.DataReaderExtensions.IsDBNull(DbDataReader reader, String name)
   at Kanini.Data.Infrastructure.DatabaseReader.MapToObject[T](SqlDataReader reader) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 151
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 70
2026-01-06 17:34:55 [ERR] Error getting all sources for patient "b2faadec-73ee-45a9-90fa-fffbf125ec50"
System.IndexOutOfRangeException: OrganizationName
   at Microsoft.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName)
   at Microsoft.Data.SqlClient.SqlDataReader.GetOrdinal(String name)
   at System.Data.DataReaderExtensions.IsDBNull(DbDataReader reader, String name)
   at Kanini.Data.Infrastructure.DatabaseReader.MapToObject[T](SqlDataReader reader) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 151
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 70
   at Kanini.Data.Repositories.Patients.PatientReadRepository.GetByGlobalIdAllSourcesAsync(Guid globalPatientId) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Patients\PatientReadRepository.cs:line 64
2026-01-06 17:34:55 [ERR] Error getting patient sources for "b2faadec-73ee-45a9-90fa-fffbf125ec50"
System.IndexOutOfRangeException: OrganizationName
   at Microsoft.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName)
   at Microsoft.Data.SqlClient.SqlDataReader.GetOrdinal(String name)
   at System.Data.DataReaderExtensions.IsDBNull(DbDataReader reader, String name)
   at Kanini.Data.Infrastructure.DatabaseReader.MapToObject[T](SqlDataReader reader) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 151
   at Kanini.Data.Infrastructure.DatabaseReader.QueryAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 70
   at Kanini.Data.Repositories.Patients.PatientReadRepository.GetByGlobalIdAllSourcesAsync(Guid globalPatientId) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Patients\PatientReadRepository.cs:line 64
   at Kanini.Application.Services.Patients.PatientService.GetPatientSourcesAsync(Guid globalPatientId) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Patients\PatientService.cs:line 161
2026-01-06 17:34:55 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:34:55 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api) in 117.816ms
2026-01-06 17:34:55 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api)'
2026-01-06 17:34:55 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/b2faadec-73ee-45a9-90fa-fffbf125ec50/sources - 400 null application/json; charset=utf-8 164.5144ms
2026-01-06 17:35:10 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/index.html - null null
2026-01-06 17:35:10 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/index.html - 200 null text/html;charset=utf-8 115.8635ms
2026-01-06 17:35:10 [INF] Request starting HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - null null
2026-01-06 17:35:10 [INF] Request finished HTTP/1.1 GET http://localhost:5201/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.1705ms
2026-01-06 17:37:39 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:37:39 [INF] CORS policy execution successful.
2026-01-06 17:37:39 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:37:39 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:37:39 [INF] Getting all patients
2026-01-06 17:37:39 [INF] Getting all patients
2026-01-06 17:37:39 [INF] Retrieved 1 patients
2026-01-06 17:37:39 [INF] Retrieved 1 patients
2026-01-06 17:37:39 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:37:39 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 62.0561ms
2026-01-06 17:37:39 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:37:39 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 74.0506ms
2026-01-06 17:37:47 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients/b2faadec-73ee-45a9-90fa-fffbf125ec50/sources - null null
2026-01-06 17:37:47 [INF] CORS policy execution successful.
2026-01-06 17:37:47 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api)'
2026-01-06 17:37:47 [INF] Route matched with {action = "GetPatientSources", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientSources(System.Guid) on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:37:48 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:37:48 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api) in 20.4043ms
2026-01-06 17:37:48 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetPatientSources (Kanini.Api)'
2026-01-06 17:37:48 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients/b2faadec-73ee-45a9-90fa-fffbf125ec50/sources - 200 null application/json; charset=utf-8 50.8923ms
2026-01-06 17:44:21 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:44:21 [INF] CORS policy execution successful.
2026-01-06 17:44:21 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:44:21 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:44:21 [INF] Getting all patients
2026-01-06 17:44:21 [INF] Getting all patients
2026-01-06 17:44:21 [INF] Retrieved 1 patients
2026-01-06 17:44:21 [INF] Retrieved 1 patients
2026-01-06 17:44:21 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:44:21 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 14.2454ms
2026-01-06 17:44:21 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:44:21 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 21.237ms
2026-01-06 17:46:15 [INF] Application is shutting down...
2026-01-06 17:47:22 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:47:22 [INF] Now listening on: http://localhost:5201
2026-01-06 17:47:22 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:47:22 [INF] Hosting environment: Development
2026-01-06 17:47:22 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:47:29 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:47:29 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:47:29 [INF] CORS policy execution successful.
2026-01-06 17:47:30 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:47:30 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:47:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:47:30 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 606.6425ms
2026-01-06 17:47:30 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:47:30 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 934.6462ms
2026-01-06 17:47:32 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:47:32 [INF] CORS policy execution successful.
2026-01-06 17:47:32 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:47:32 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:47:32 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:47:32 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 19.0335ms
2026-01-06 17:47:32 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:47:32 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 39.0067ms
2026-01-06 17:47:33 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:47:33 [INF] CORS policy execution successful.
2026-01-06 17:47:33 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:47:33 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:47:33 [INF] Getting all patients
2026-01-06 17:47:33 [INF] Getting all patients
2026-01-06 17:47:33 [INF] Retrieved 1 patients
2026-01-06 17:47:33 [INF] Retrieved 1 patients
2026-01-06 17:47:33 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:47:33 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 67.1781ms
2026-01-06 17:47:33 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:47:33 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 176.2118ms
2026-01-06 17:47:41 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:47:41 [INF] CORS policy execution successful.
2026-01-06 17:47:41 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:47:41 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:47:41 [INF] Getting all patients
2026-01-06 17:47:41 [INF] Getting all patients
2026-01-06 17:47:41 [INF] Retrieved 1 patients
2026-01-06 17:47:41 [INF] Retrieved 1 patients
2026-01-06 17:47:41 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:47:42 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 17.3402ms
2026-01-06 17:47:42 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:47:42 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 57.1219ms
2026-01-06 17:49:18 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:49:18 [INF] CORS policy execution successful.
2026-01-06 17:49:18 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:49:18 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:49:18 [INF] Getting all patients
2026-01-06 17:49:18 [INF] Getting all patients
2026-01-06 17:49:18 [INF] Retrieved 1 patients
2026-01-06 17:49:18 [INF] Retrieved 1 patients
2026-01-06 17:49:18 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:49:18 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 11.5515ms
2026-01-06 17:49:18 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:49:18 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 16.0798ms
2026-01-06 17:49:37 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:49:37 [INF] CORS policy execution successful.
2026-01-06 17:49:37 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:49:37 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:49:37 [INF] Getting all patients
2026-01-06 17:49:37 [INF] Getting all patients
2026-01-06 17:49:37 [INF] Retrieved 1 patients
2026-01-06 17:49:37 [INF] Retrieved 1 patients
2026-01-06 17:49:37 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:49:37 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 4.1878ms
2026-01-06 17:49:37 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:49:37 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 11.2097ms
2026-01-06 17:50:06 [INF] Application is shutting down...
2026-01-06 17:50:13 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:50:13 [INF] Now listening on: http://localhost:5201
2026-01-06 17:50:13 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:50:13 [INF] Hosting environment: Development
2026-01-06 17:50:13 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:50:20 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:50:20 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:50:20 [INF] CORS policy execution successful.
2026-01-06 17:50:21 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:50:21 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:50:21 [INF] Getting all patients
2026-01-06 17:50:21 [INF] Getting all patients
2026-01-06 17:50:21 [INF] Retrieved 1 patients
2026-01-06 17:50:21 [INF] Retrieved 1 patients
2026-01-06 17:50:21 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:50:21 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 852.0016ms
2026-01-06 17:50:21 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:50:21 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 1164.1755ms
2026-01-06 17:50:30 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:50:30 [INF] CORS policy execution successful.
2026-01-06 17:50:30 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:50:30 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:50:30 [INF] Getting all patients
2026-01-06 17:50:30 [INF] Getting all patients
2026-01-06 17:50:30 [INF] Retrieved 1 patients
2026-01-06 17:50:30 [INF] Retrieved 1 patients
2026-01-06 17:50:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:50:30 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 44.4696ms
2026-01-06 17:50:30 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:50:30 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 82.8909ms
2026-01-06 17:50:32 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:50:32 [INF] CORS policy execution successful.
2026-01-06 17:50:32 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:50:32 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:50:32 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:50:32 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 70.2957ms
2026-01-06 17:50:32 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:50:32 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 150.4921ms
2026-01-06 17:50:34 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:50:34 [INF] CORS policy execution successful.
2026-01-06 17:50:34 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:50:34 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:50:34 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:50:34 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 21.8539ms
2026-01-06 17:50:34 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:50:34 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 200 null application/json; charset=utf-8 96.9412ms
2026-01-06 17:51:34 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-06 17:51:34 [INF] CORS policy execution successful.
2026-01-06 17:51:34 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 6.7845ms
2026-01-06 17:51:34 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 135
2026-01-06 17:51:34 [INF] CORS policy execution successful.
2026-01-06 17:51:34 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 17:51:34 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:51:34 [INF] Registration OTP process started for email: sujithkumar.kanini@outlook.com
2026-01-06 17:51:38 [INF] Email sent successfully to: sujithkumar.kanini@outlook.com
2026-01-06 17:51:38 [INF] Registration OTP sent successfully for email: sujithkumar.kanini@outlook.com
2026-01-06 17:51:38 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-06 17:51:38 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 4304.6998ms
2026-01-06 17:51:38 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-06 17:51:38 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 4335.0669ms
2026-01-06 17:52:27 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-06 17:52:27 [INF] CORS policy execution successful.
2026-01-06 17:52:27 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 85.2038ms
2026-01-06 17:52:27 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 340
2026-01-06 17:52:27 [INF] CORS policy execution successful.
2026-01-06 17:52:27 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 17:52:27 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:52:27 [INF] Registration verification started for email: sujithkumar.kanini@outlook.com
2026-01-06 17:52:27 [WRN] Invalid OTP verification attempt for email: sujithkumar.kanini@outlook.com
2026-01-06 17:52:27 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:52:27 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 103.375ms
2026-01-06 17:52:27 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 17:52:27 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 400 null application/json; charset=utf-8 246.7316ms
2026-01-06 17:52:46 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-06 17:52:46 [INF] CORS policy execution successful.
2026-01-06 17:52:46 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 4.6961ms
2026-01-06 17:52:46 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 340
2026-01-06 17:52:46 [INF] CORS policy execution successful.
2026-01-06 17:52:46 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 17:52:46 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:52:46 [INF] Registration verification started for email: sujithkumar.kanini@outlook.com
2026-01-06 17:52:47 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 17:52:47 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 17:52:48 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-06 17:52:48 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 300), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 150), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [ContactPhone] = @p1, [CreatedBy] = @p2, [Name] = @p3
OUTPUT 1
WHERE [OrganizationId] = @p4;
INSERT INTO [Users] ([UserId], [CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 17:52:48 [INF] Registration verification completed for email: sujithkumar.kanini@outlook.com, UserId: "908cc836-0cf6-4d22-b38f-08de4d1e4daf"
2026-01-06 17:52:48 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-06 17:52:48 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 1720.1913ms
2026-01-06 17:52:48 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-06 17:52:48 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 1769.8222ms
2026-01-06 17:53:13 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:53:13 [INF] CORS policy execution successful.
2026-01-06 17:53:13 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 14.8965ms
2026-01-06 17:53:13 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 67
2026-01-06 17:53:13 [INF] CORS policy execution successful.
2026-01-06 17:53:13 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:53:13 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:53:13 [INF] Login attempt started for email: sujithkumar.kanini@outlook.com
2026-01-06 17:53:13 [INF] Executed DbCommand (6ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:53:13 [INF] Login completed successfully for email: sujithkumar.kanini@outlook.com, UserId: "908cc836-0cf6-4d22-b38f-08de4d1e4daf"
2026-01-06 17:53:13 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:53:13 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 178.6117ms
2026-01-06 17:53:13 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:53:13 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 243.0752ms
2026-01-06 17:53:41 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:53:41 [INF] CORS policy execution successful.
2026-01-06 17:53:41 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:53:41 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:53:41 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:53:41 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 30.606ms
2026-01-06 17:53:41 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:53:41 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 42.8264ms
2026-01-06 17:53:43 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:53:43 [INF] CORS policy execution successful.
2026-01-06 17:53:43 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:53:43 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:53:43 [INF] Getting all patients
2026-01-06 17:53:43 [INF] Getting all patients
2026-01-06 17:53:43 [INF] Retrieved 1 patients
2026-01-06 17:53:43 [INF] Retrieved 1 patients
2026-01-06 17:53:43 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:53:43 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 13.8115ms
2026-01-06 17:53:43 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:53:43 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 23.1882ms
2026-01-06 17:54:10 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/data-requests - null null
2026-01-06 17:54:10 [INF] CORS policy execution successful.
2026-01-06 17:54:10 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/data-requests - 204 null null 3.2824ms
2026-01-06 17:54:10 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/data-requests - application/json 154
2026-01-06 17:54:10 [INF] CORS policy execution successful.
2026-01-06 17:54:10 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api)'
2026-01-06 17:54:10 [INF] Route matched with {action = "CreateRequest", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequest(Kanini.Application.DTOs.DataRequests.CreateDataRequestDto) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:54:10 [INF] Data request creation started for GlobalPatientId: "b2faadec-73ee-45a9-90fa-fffbf125ec50"
2026-01-06 17:54:10 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid), @p7='?' (Size = 1000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DataRequests] ([RequestId], [ApprovedAt], [ApprovedByUserId], [CreatedBy], [CreatedOn], [ExpiresAt], [GlobalPatientId], [Notes], [OrganizationId], [OrganizationId1], [RequestingOrganizationId], [RequestingUserId], [SourceOrganizationId], [Status], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 17:54:10 [ERR] Error executing stored procedure: sp_GetDataRequestById
System.InvalidCastException: Object must implement IConvertible.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 40
2026-01-06 17:54:10 [ERR] Error getting data request "ff272a1c-10e0-4693-bc02-8510f8a35045"
System.InvalidCastException: Object must implement IConvertible.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 40
   at Kanini.Data.Repositories.DataRequests.DataRequestReadRepository.GetByIdAsync(Guid requestId) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\DataRequests\DataRequestReadRepository.cs:line 39
2026-01-06 17:54:11 [ERR] Data request creation failed for GlobalPatientId: "b2faadec-73ee-45a9-90fa-fffbf125ec50", Error: Object must implement IConvertible.
System.InvalidCastException: Object must implement IConvertible.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 40
   at Kanini.Data.Repositories.DataRequests.DataRequestReadRepository.GetByIdAsync(Guid requestId) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\DataRequests\DataRequestReadRepository.cs:line 39
   at Kanini.Application.Services.DataRequests.DataRequestService.CreateRequestAsync(CreateDataRequestDto request, Guid requestingUserId, Guid requestingOrganizationId, String createdBy) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\DataRequests\DataRequestService.cs:line 63
2026-01-06 17:54:11 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-06 17:54:11 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api) in 208.1674ms
2026-01-06 17:54:11 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api)'
2026-01-06 17:54:11 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/data-requests - 400 null application/json; charset=utf-8 427.8203ms
2026-01-06 17:55:43 [INF] Application is shutting down...
2026-01-06 17:55:54 [INF] User profile is available. Using 'C:\Users\maste\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-06 17:55:54 [INF] Now listening on: http://localhost:5201
2026-01-06 17:55:54 [INF] Application started. Press Ctrl+C to shut down.
2026-01-06 17:55:54 [INF] Hosting environment: Development
2026-01-06 17:55:54 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-06 17:55:59 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/patients - null null
2026-01-06 17:55:59 [WRN] Failed to determine the https port for redirect.
2026-01-06 17:55:59 [INF] CORS policy execution successful.
2026-01-06 17:55:59 [INF] Executing endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:55:59 [INF] Route matched with {action = "GetAllPatients", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Kanini.Api.Controllers.PatientsController (Kanini.Api).
2026-01-06 17:55:59 [INF] Getting all patients
2026-01-06 17:55:59 [INF] Getting all patients
2026-01-06 17:55:59 [INF] Retrieved 1 patients
2026-01-06 17:55:59 [INF] Retrieved 1 patients
2026-01-06 17:56:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.Patients.PatientResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:56:00 [INF] Executed action Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api) in 618.5231ms
2026-01-06 17:56:00 [INF] Executed endpoint 'Kanini.Api.Controllers.PatientsController.GetAllPatients (Kanini.Api)'
2026-01-06 17:56:00 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/patients - 200 null application/json; charset=utf-8 942.1ms
2026-01-06 17:57:28 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/data-requests - null null
2026-01-06 17:57:28 [INF] CORS policy execution successful.
2026-01-06 17:57:28 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/data-requests - 204 null null 8.3579ms
2026-01-06 17:57:28 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/data-requests - application/json 150
2026-01-06 17:57:28 [INF] CORS policy execution successful.
2026-01-06 17:57:28 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api)'
2026-01-06 17:57:28 [INF] Route matched with {action = "CreateRequest", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequest(Kanini.Application.DTOs.DataRequests.CreateDataRequestDto) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:57:28 [INF] Data request creation started for GlobalPatientId: "b2faadec-73ee-45a9-90fa-fffbf125ec50"
2026-01-06 17:57:29 [WRN] There are multiple relationships between 'DataRequest' and 'Organization' without configured foreign key properties. This will cause Entity Framework to create shadow properties on 'DataRequest' with names dependent on the discovery order. Consider configuring the foreign key properties using the [ForeignKey] attribute or in 'OnModelCreating'.
2026-01-06 17:57:29 [WRN] The foreign key property 'DataRequest.OrganizationId1' was created in shadow state because a conflicting property with the simple name 'OrganizationId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2026-01-06 17:57:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid), @p7='?' (Size = 1000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DataRequests] ([RequestId], [ApprovedAt], [ApprovedByUserId], [CreatedBy], [CreatedOn], [ExpiresAt], [GlobalPatientId], [Notes], [OrganizationId], [OrganizationId1], [RequestingOrganizationId], [RequestingUserId], [SourceOrganizationId], [Status], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-06 17:57:30 [INF] Data request created successfully with ID: "6d570a46-0741-43e0-aed8-d309283520d0"
2026-01-06 17:57:30 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.DataRequests.DataRequestResponseDto'.
2026-01-06 17:57:30 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api) in 1584.8693ms
2026-01-06 17:57:30 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.CreateRequest (Kanini.Api)'
2026-01-06 17:57:30 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/data-requests - 200 null application/json; charset=utf-8 1630.9678ms
2026-01-06 17:57:33 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:57:33 [INF] CORS policy execution successful.
2026-01-06 17:57:33 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:33 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:57:33 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:57:33 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 59.648ms
2026-01-06 17:57:33 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:33 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 91.1759ms
2026-01-06 17:57:44 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:57:44 [INF] CORS policy execution successful.
2026-01-06 17:57:44 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:44 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:57:44 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:57:44 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 19.2096ms
2026-01-06 17:57:44 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:44 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 200 null application/json; charset=utf-8 29.0751ms
2026-01-06 17:57:45 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:57:45 [INF] CORS policy execution successful.
2026-01-06 17:57:45 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:45 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:57:45 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:57:45 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 3.287ms
2026-01-06 17:57:45 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:45 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 12.6102ms
2026-01-06 17:57:47 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:57:47 [INF] CORS policy execution successful.
2026-01-06 17:57:47 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:48 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:57:48 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:57:48 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 19.0983ms
2026-01-06 17:57:48 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:57:48 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 110.8493ms
2026-01-06 17:58:27 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - null null
2026-01-06 17:58:27 [INF] CORS policy execution successful.
2026-01-06 17:58:27 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/login - 204 null null 4.4375ms
2026-01-06 17:58:27 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/login - application/json 73
2026-01-06 17:58:27 [INF] CORS policy execution successful.
2026-01-06 17:58:27 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:58:27 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Kanini.Application.DTOs.Auth.LoginRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-06 17:58:27 [INF] Login attempt started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-06 17:58:28 [INF] Executed DbCommand (6ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 150), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (Size = 256), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedOn] = @p1, [Email] = @p2, [IsActive] = @p3, [LastLogin] = @p4, [OrganizationId] = @p5, [PasswordHash] = @p6, [Role] = @p7, [UpdatedBy] = @p8, [UpdatedOn] = @p9
OUTPUT 1
WHERE [UserId] = @p10;
2026-01-06 17:58:28 [INF] Login completed successfully for email: sujithkumarsenthilkumar777@gmail.com, UserId: "b0dc6191-7157-4876-56ef-08de4d169e36"
2026-01-06 17:58:28 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.LoginResponseDto'.
2026-01-06 17:58:28 [INF] Executed action Kanini.Api.Controllers.AuthController.Login (Kanini.Api) in 268.4032ms
2026-01-06 17:58:28 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.Login (Kanini.Api)'
2026-01-06 17:58:28 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/login - 200 null application/json; charset=utf-8 289.9751ms
2026-01-06 17:58:35 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:58:35 [INF] CORS policy execution successful.
2026-01-06 17:58:35 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:35 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:58:35 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:58:35 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 3.8266ms
2026-01-06 17:58:35 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:35 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 15.996ms
2026-01-06 17:58:36 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:58:36 [INF] CORS policy execution successful.
2026-01-06 17:58:36 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:36 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:58:36 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:58:36 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 2.4289ms
2026-01-06 17:58:36 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:36 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 200 null application/json; charset=utf-8 12.1603ms
2026-01-06 17:58:44 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - null null
2026-01-06 17:58:44 [INF] CORS policy execution successful.
2026-01-06 17:58:44 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:44 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:58:44 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:58:44 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 4.6414ms
2026-01-06 17:58:44 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:44 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=true - 200 null application/json; charset=utf-8 14.2271ms
2026-01-06 17:58:46 [INF] Request starting HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - null null
2026-01-06 17:58:46 [INF] CORS policy execution successful.
2026-01-06 17:58:46 [INF] Executing endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:46 [INF] Route matched with {action = "GetRequests", controller = "DataRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequests(Boolean) on controller Kanini.Api.Controllers.DataRequestsController (Kanini.Api).
2026-01-06 17:58:46 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Kanini.Application.DTOs.DataRequests.DataRequestResponseDto, Kanini.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-06 17:58:46 [INF] Executed action Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api) in 25.317ms
2026-01-06 17:58:46 [INF] Executed endpoint 'Kanini.Api.Controllers.DataRequestsController.GetRequests (Kanini.Api)'
2026-01-06 17:58:46 [INF] Request finished HTTP/1.1 GET http://localhost:5201/api/data-requests?isRequesting=false - 200 null application/json; charset=utf-8 34.4654ms
2026-01-06 17:59:52 [INF] Application is shutting down...
