2026-01-02 18:47:05 [INF] Now listening on: http://localhost:5201
2026-01-02 18:47:05 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 18:47:05 [INF] Hosting environment: Development
2026-01-02 18:47:05 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 18:51:42 [INF] Application is shutting down...
2026-01-02 18:54:26 [INF] Now listening on: http://localhost:5201
2026-01-02 18:54:26 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 18:54:26 [INF] Hosting environment: Development
2026-01-02 18:54:26 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 18:55:58 [INF] Application is shutting down...
2026-01-02 18:56:25 [INF] Now listening on: http://localhost:5201
2026-01-02 18:56:25 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 18:56:25 [INF] Hosting environment: Development
2026-01-02 18:56:25 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 18:56:36 [INF] Application is shutting down...
2026-01-02 18:57:04 [INF] Now listening on: http://localhost:5201
2026-01-02 18:57:04 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 18:57:04 [INF] Hosting environment: Development
2026-01-02 18:57:04 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 18:57:49 [INF] Application is shutting down...
2026-01-02 18:58:09 [INF] Now listening on: http://localhost:5201
2026-01-02 18:58:09 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 18:58:09 [INF] Hosting environment: Development
2026-01-02 18:58:09 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 18:59:15 [INF] Application is shutting down...
2026-01-02 18:59:24 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 18:59:24 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-02 18:59:24 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-02 18:59:24 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-02 18:59:24 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 18:59:24 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-02 18:59:24 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-02 18:59:24 [INF] No migrations were applied. The database is already up to date.
2026-01-02 18:59:24 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-02 19:00:39 [INF] Now listening on: http://localhost:5201
2026-01-02 19:00:39 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 19:00:39 [INF] Hosting environment: Development
2026-01-02 19:00:39 [INF] Content root path: c:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 19:04:24 [INF] Now listening on: http://localhost:5201
2026-01-02 19:04:24 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 19:04:24 [INF] Hosting environment: Development
2026-01-02 19:04:24 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 19:07:04 [INF] Application is shutting down...
2026-01-02 19:08:10 [INF] Executed DbCommand (136ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-02 19:08:10 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-02 19:08:10 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 19:08:10 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-02 19:08:10 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-02 19:08:10 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-02 19:08:10 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-02 19:08:10 [INF] Applying migration '20260102133754_InitialCreate'.
2026-01-02 19:08:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [Organizations] (
    [OrganizationId] nvarchar(50) NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-02 19:08:10 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [PatientIdentifiers] (
    [Id] int NOT NULL IDENTITY,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [NationalId] nvarchar(200) NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [NationalIdHash] nvarchar(64) NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 19:08:10 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationName] nvarchar(200) NOT NULL,
    [OrganizationId] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 19:08:10 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] int NOT NULL,
    [RequestingOrganizationId] nvarchar(50) NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] int NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 19:08:10 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] int NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 19:08:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_NationalIdHash] ON [PatientIdentifiers] ([NationalIdHash]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-02 19:08:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-02 19:08:10 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260102133754_InitialCreate', N'10.0.1');
2026-01-02 19:08:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-02 19:09:12 [INF] Now listening on: http://localhost:5201
2026-01-02 19:09:12 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 19:09:12 [INF] Hosting environment: Development
2026-01-02 19:09:12 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 19:24:01 [INF] Application is shutting down...
2026-01-02 21:14:11 [INF] Now listening on: http://localhost:5201
2026-01-02 21:14:11 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:14:11 [INF] Hosting environment: Development
2026-01-02 21:14:11 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:22:56 [INF] Application is shutting down...
2026-01-02 21:23:47 [INF] Executed DbCommand (232ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-02 21:23:47 [INF] Executed DbCommand (157ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-02 21:23:47 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 21:23:47 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-02 21:23:47 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-02 21:23:48 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-02 21:23:48 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT 1
2026-01-02 21:23:48 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-02 21:23:48 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-02 21:23:48 [INF] Applying migration '20260102155315_InitialCreate'.
2026-01-02 21:23:48 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [Organizations] (
    [OrganizationId] nvarchar(50) NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-02 21:23:48 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [PatientIdentifiers] (
    [Id] int NOT NULL IDENTITY,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [NationalId] nvarchar(200) NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [NationalIdHash] nvarchar(64) NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 21:23:48 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationName] nvarchar(200) NOT NULL,
    [OrganizationId] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 21:23:48 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] int NOT NULL,
    [RequestingOrganizationId] nvarchar(50) NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] int NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 21:23:48 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] int NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_NationalIdHash] ON [PatientIdentifiers] ([NationalIdHash]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-02 21:23:48 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260102155315_InitialCreate', N'10.0.1');
2026-01-02 21:23:48 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='0']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-02 21:25:02 [INF] Now listening on: http://localhost:5201
2026-01-02 21:25:02 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:25:02 [INF] Hosting environment: Development
2026-01-02 21:25:02 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:26:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:26:00 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:26:00 [INF] CORS policy execution successful.
2026-01-02 21:26:01 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 411.1882ms
2026-01-02 21:26:01 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:26:01 [INF] CORS policy execution successful.
2026-01-02 21:26:01 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:26:01 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:26:02 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:26:03 [ERR] Error executing stored procedure: sp_CheckUserExistsByEmail
System.ArgumentException: Keyword not supported: 'command timeout'.
   at System.Data.Common.DbConnectionOptions.ParseInternal(Dictionary`2 parsetable, String connectionString, Boolean buildChain, Dictionary`2 synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Dictionary`2 synonyms)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
   at System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key)
   at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
   at System.Data.SqlClient.SqlConnection..ctor(String connectionString)
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 24
2026-01-02 21:26:03 [ERR] Registration OTP failed for email: sujithkumarsenthilkumar777@gmail.com, Error: Keyword not supported: 'command timeout'.
System.ArgumentException: Keyword not supported: 'command timeout'.
   at System.Data.Common.DbConnectionOptions.ParseInternal(Dictionary`2 parsetable, String connectionString, Boolean buildChain, Dictionary`2 synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Dictionary`2 synonyms)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
   at System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key)
   at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
   at System.Data.SqlClient.SqlConnection..ctor(String connectionString)
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 24
   at Kanini.Data.Repositories.Users.UserReadRepository.ExistsByEmailAsync(String email) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserReadRepository.cs:line 24
   at Kanini.Application.Services.Users.AuthService.RegisterWithOtpAsync(RegisterWithOtpRequestDto request) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Users\AuthService.cs:line 51
2026-01-02 21:26:03 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-02 21:26:03 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 2255.6846ms
2026-01-02 21:26:03 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:26:03 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 400 null application/json; charset=utf-8 2453.6047ms
2026-01-02 21:29:19 [INF] Application is shutting down...
2026-01-02 21:29:29 [INF] Now listening on: http://localhost:5201
2026-01-02 21:29:29 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:29:29 [INF] Hosting environment: Development
2026-01-02 21:29:29 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:29:35 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:29:35 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:29:35 [INF] CORS policy execution successful.
2026-01-02 21:29:35 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 199.8247ms
2026-01-02 21:29:35 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:29:35 [INF] CORS policy execution successful.
2026-01-02 21:29:35 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:29:35 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:29:36 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:29:36 [ERR] Error executing stored procedure: sp_CheckUserExistsByEmail
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
 ---> System.ComponentModel.Win32Exception (233): No process is on the other end of the pipe.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
ClientConnectionId:1e3ddb8b-593b-4b94-b319-33f49c745281
Error Number:233,State:0,Class:20
2026-01-02 21:29:37 [ERR] Registration OTP failed for email: sujithkumarsenthilkumar777@gmail.com, Error: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
 ---> System.ComponentModel.Win32Exception (233): No process is on the other end of the pipe.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
   at Kanini.Data.Repositories.Users.UserReadRepository.ExistsByEmailAsync(String email) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserReadRepository.cs:line 24
   at Kanini.Application.Services.Users.AuthService.RegisterWithOtpAsync(RegisterWithOtpRequestDto request) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Users\AuthService.cs:line 51
ClientConnectionId:1e3ddb8b-593b-4b94-b319-33f49c745281
Error Number:233,State:0,Class:20
2026-01-02 21:29:37 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-02 21:29:37 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 1600.1957ms
2026-01-02 21:29:37 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:29:37 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 400 null application/json; charset=utf-8 1824.6845ms
2026-01-02 21:32:05 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:32:05 [INF] CORS policy execution successful.
2026-01-02 21:32:05 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 36.4124ms
2026-01-02 21:32:05 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:32:05 [INF] CORS policy execution successful.
2026-01-02 21:32:05 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:32:05 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:32:05 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:32:05 [ERR] Error executing stored procedure: sp_CheckUserExistsByEmail
System.Data.SqlClient.SqlException (0x80131904): The instance of SQL Server you attempted to connect to does not support encryption.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
ClientConnectionId:68c0e153-33e8-43f0-a3ed-fe75ed674e75
Error Number:20,State:0,Class:20
2026-01-02 21:32:05 [ERR] Registration OTP failed for email: sujithkumarsenthilkumar777@gmail.com, Error: The instance of SQL Server you attempted to connect to does not support encryption.
System.Data.SqlClient.SqlException (0x80131904): The instance of SQL Server you attempted to connect to does not support encryption.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
   at Kanini.Data.Repositories.Users.UserReadRepository.ExistsByEmailAsync(String email) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserReadRepository.cs:line 24
   at Kanini.Application.Services.Users.AuthService.RegisterWithOtpAsync(RegisterWithOtpRequestDto request) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Users\AuthService.cs:line 51
ClientConnectionId:68c0e153-33e8-43f0-a3ed-fe75ed674e75
Error Number:20,State:0,Class:20
2026-01-02 21:32:05 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-02 21:32:05 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 284.8321ms
2026-01-02 21:32:05 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:32:05 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 400 null application/json; charset=utf-8 372.9766ms
2026-01-02 21:32:15 [INF] Application is shutting down...
2026-01-02 21:32:23 [INF] Now listening on: http://localhost:5201
2026-01-02 21:32:23 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:32:23 [INF] Hosting environment: Development
2026-01-02 21:32:23 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:32:27 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:32:27 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:32:27 [INF] CORS policy execution successful.
2026-01-02 21:32:27 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 219.3687ms
2026-01-02 21:32:27 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:32:27 [INF] CORS policy execution successful.
2026-01-02 21:32:27 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:32:27 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:32:28 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:32:29 [ERR] Error executing stored procedure: sp_CheckUserExistsByEmail
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
 ---> System.ComponentModel.Win32Exception (233): No process is on the other end of the pipe.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
ClientConnectionId:812f7734-e182-4406-a99a-f599b2c67fc8
Error Number:233,State:0,Class:20
2026-01-02 21:32:29 [ERR] Registration OTP failed for email: sujithkumarsenthilkumar777@gmail.com, Error: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)
 ---> System.ComponentModel.Win32Exception (233): No process is on the other end of the pipe.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at Kanini.Data.Infrastructure.DatabaseReader.QuerySingleOrDefaultAsync[T](String storedProcedure, Object parameters) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Infrastructure\DatabaseReader.cs:line 25
   at Kanini.Data.Repositories.Users.UserReadRepository.ExistsByEmailAsync(String email) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Data\Repositories\Users\UserReadRepository.cs:line 24
   at Kanini.Application.Services.Users.AuthService.RegisterWithOtpAsync(RegisterWithOtpRequestDto request) in C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Application\Services\Users\AuthService.cs:line 51
ClientConnectionId:812f7734-e182-4406-a99a-f599b2c67fc8
Error Number:233,State:0,Class:20
2026-01-02 21:32:29 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-02 21:32:29 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 1691.4349ms
2026-01-02 21:32:29 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:32:29 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 400 null application/json; charset=utf-8 2277.1726ms
2026-01-02 21:37:41 [INF] Application is shutting down...
2026-01-02 21:38:06 [INF] Now listening on: http://localhost:5201
2026-01-02 21:38:06 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:38:06 [INF] Hosting environment: Development
2026-01-02 21:38:06 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:38:19 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:38:19 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:38:19 [INF] CORS policy execution successful.
2026-01-02 21:38:19 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 193.9291ms
2026-01-02 21:38:19 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:38:20 [INF] CORS policy execution successful.
2026-01-02 21:38:20 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:38:20 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:38:20 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:38:21 [INF] Email would be sent to: sujithkumarsenthilkumar777@gmail.com, Subject: FHIR Converter - Email Verification
2026-01-02 21:38:21 [INF] Email body: 
                <html>
                <body>
                    <h2>FHIR Converter - Email Verification</h2>
                    <p>Hello sujithkumarsenthilkumar777@gmail.com,</p>
                    <p>Your verification code is: <strong style='font-size: 24px; color: #007bff;'>425083</strong></p>
                    <p>This code will expire in 5 minutes.</p>
                    <p>If you didn't request this, please ignore this email.</p>
                    <br>
                    <p>Best regards,<br>FHIR Converter Team</p>
                </body>
                </html>
2026-01-02 21:38:21 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:38:22 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 21:38:22 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 1951.7856ms
2026-01-02 21:38:22 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:38:22 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 2145.257ms
2026-01-02 21:42:53 [INF] Application is shutting down...
2026-01-02 21:43:05 [INF] Now listening on: http://localhost:5201
2026-01-02 21:43:05 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:43:05 [INF] Hosting environment: Development
2026-01-02 21:43:05 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:43:28 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:43:29 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:43:29 [INF] CORS policy execution successful.
2026-01-02 21:43:29 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 196.6056ms
2026-01-02 21:43:29 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:43:29 [INF] CORS policy execution successful.
2026-01-02 21:43:29 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:43:29 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:43:30 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:43:37 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:43:37 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:43:37 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 21:43:37 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 8319.9294ms
2026-01-02 21:43:37 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:43:37 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 8488.1968ms
2026-01-02 21:46:12 [INF] Application is shutting down...
2026-01-02 21:46:36 [INF] Now listening on: http://localhost:5201
2026-01-02 21:46:36 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:46:36 [INF] Hosting environment: Development
2026-01-02 21:46:36 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:47:03 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:47:03 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:47:03 [INF] CORS policy execution successful.
2026-01-02 21:47:03 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 207.1091ms
2026-01-02 21:47:03 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:47:03 [INF] CORS policy execution successful.
2026-01-02 21:47:03 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:47:04 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:47:04 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:47:11 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:47:11 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:47:11 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 21:47:11 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 7048.6068ms
2026-01-02 21:47:11 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:47:11 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 7222.0817ms
2026-01-02 21:47:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-02 21:47:37 [INF] CORS policy execution successful.
2026-01-02 21:47:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 28.8847ms
2026-01-02 21:47:37 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 322
2026-01-02 21:47:37 [INF] CORS policy execution successful.
2026-01-02 21:47:37 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 21:47:37 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:47:38 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:47:41 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-02 21:47:42 [INF] Executed DbCommand (18ms) [Parameters=[@p2='?' (Size = 50), @p0='?' (Size = 300), @p1='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (Size = 150), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 200), @p10='?' (Size = 256), @p11='?' (DbType = Int32), @p12='?' (Size = 100), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [Name] = @p1
OUTPUT 1
WHERE [OrganizationId] = @p2;
INSERT INTO [Users] ([CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [OrganizationName], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
OUTPUT INSERTED.[UserId]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-02 21:47:42 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: 1
2026-01-02 21:47:42 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-02 21:47:42 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 4411.0743ms
2026-01-02 21:47:42 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 21:47:42 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 4589.61ms
2026-01-02 21:52:27 [INF] Application is shutting down...
2026-01-02 21:53:47 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [FhirConverterDb];
2026-01-02 21:53:47 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [FhirConverterDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2026-01-02 21:53:47 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-02 21:53:47 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-02 21:53:47 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2026-01-02 21:53:47 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-02 21:53:47 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-02 21:53:47 [INF] Applying migration '20260102162325_InitialCreate'.
2026-01-02 21:53:47 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Organizations] (
    [OrganizationId] nvarchar(50) NOT NULL,
    [Name] nvarchar(500) NOT NULL,
    [Type] int NOT NULL,
    [ContactEmail] nvarchar(300) NOT NULL,
    [ContactPhone] nvarchar(200) NULL,
    [IsActive] bit NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Organizations] PRIMARY KEY ([OrganizationId])
);
2026-01-02 21:53:47 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PatientIdentifiers] (
    [Id] int NOT NULL IDENTITY,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [LocalPatientId] nvarchar(200) NOT NULL,
    [NationalId] nvarchar(200) NULL,
    [LastName] nvarchar(200) NULL,
    [FirstName] nvarchar(200) NULL,
    [DateOfBirth] datetime2 NULL,
    [NationalIdHash] nvarchar(64) NULL,
    [LastNameHash] nvarchar(64) NULL,
    [FirstNameHash] nvarchar(64) NULL,
    [DateOfBirthHash] nvarchar(64) NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_PatientIdentifiers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PatientIdentifiers_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 21:53:47 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(150) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [Role] int NOT NULL,
    [OrganizationName] nvarchar(200) NOT NULL,
    [OrganizationId] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL,
    [LastLogin] datetime2 NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId]),
    CONSTRAINT [FK_Users_Organizations_OrganizationId] FOREIGN KEY ([OrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION
);
2026-01-02 21:53:47 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DataRequests] (
    [RequestId] uniqueidentifier NOT NULL,
    [GlobalPatientId] uniqueidentifier NOT NULL,
    [RequestingUserId] int NOT NULL,
    [RequestingOrganizationId] nvarchar(50) NOT NULL,
    [SourceOrganizationId] nvarchar(50) NOT NULL,
    [Status] int NOT NULL,
    [Notes] nvarchar(1000) NULL,
    [ApprovedAt] datetime2 NULL,
    [ApprovedByUserId] int NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_DataRequests] PRIMARY KEY ([RequestId]),
    CONSTRAINT [FK_DataRequests_Organizations_RequestingOrganizationId] FOREIGN KEY ([RequestingOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Organizations_SourceOrganizationId] FOREIGN KEY ([SourceOrganizationId]) REFERENCES [Organizations] ([OrganizationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_ApprovedByUserId] FOREIGN KEY ([ApprovedByUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DataRequests_Users_RequestingUserId] FOREIGN KEY ([RequestingUserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 21:53:47 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ConversionJobs] (
    [JobId] uniqueidentifier NOT NULL,
    [UserId] int NOT NULL,
    [RequestId] uniqueidentifier NULL,
    [InputFormat] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(2000) NULL,
    [PatientsCount] int NOT NULL,
    [ObservationsCount] int NOT NULL,
    [CompletedAt] datetime2 NULL,
    [OriginalFileName] nvarchar(200) NULL,
    [FileSizeBytes] bigint NULL,
    [ProcessingTimeMs] bigint NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [UpdatedBy] nvarchar(100) NULL,
    [UpdatedOn] datetime2 NULL,
    CONSTRAINT [PK_ConversionJobs] PRIMARY KEY ([JobId]),
    CONSTRAINT [FK_ConversionJobs_DataRequests_RequestId] FOREIGN KEY ([RequestId]) REFERENCES [DataRequests] ([RequestId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ConversionJobs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE NO ACTION
);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_RequestId] ON [ConversionJobs] ([RequestId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ConversionJobs_UserId] ON [ConversionJobs] ([UserId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_ApprovedByUserId] ON [DataRequests] ([ApprovedByUserId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingOrganizationId] ON [DataRequests] ([RequestingOrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_RequestingUserId] ON [DataRequests] ([RequestingUserId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DataRequests_SourceOrganizationId] ON [DataRequests] ([SourceOrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Organizations_OrganizationId] ON [Organizations] ([OrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_PatientIdentifiers_GlobalPatientId_SourceOrganizationId] ON [PatientIdentifiers] ([GlobalPatientId], [SourceOrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_LastNameHash_DateOfBirthHash] ON [PatientIdentifiers] ([LastNameHash], [DateOfBirthHash]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_NationalIdHash] ON [PatientIdentifiers] ([NationalIdHash]);
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PatientIdentifiers_SourceOrganizationId] ON [PatientIdentifiers] ([SourceOrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2026-01-02 21:53:47 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_OrganizationId] ON [Users] ([OrganizationId]);
2026-01-02 21:53:47 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260102162325_InitialCreate', N'10.0.1');
2026-01-02 21:53:47 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2026-01-02 21:54:41 [INF] Now listening on: http://localhost:5201
2026-01-02 21:54:41 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 21:54:41 [INF] Hosting environment: Development
2026-01-02 21:54:41 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 21:55:42 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 21:55:42 [WRN] Failed to determine the https port for redirect.
2026-01-02 21:55:42 [INF] CORS policy execution successful.
2026-01-02 21:55:42 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 204.7287ms
2026-01-02 21:55:42 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 21:55:42 [INF] CORS policy execution successful.
2026-01-02 21:55:42 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:55:42 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:55:43 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:55:49 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:55:49 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:55:49 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 21:55:49 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 7290.0316ms
2026-01-02 21:55:49 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 21:55:49 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 7452.245ms
2026-01-02 21:56:07 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-02 21:56:07 [INF] CORS policy execution successful.
2026-01-02 21:56:07 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 29.9416ms
2026-01-02 21:56:07 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 322
2026-01-02 21:56:07 [INF] CORS policy execution successful.
2026-01-02 21:56:07 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 21:56:07 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 21:56:07 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 21:56:10 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-02 21:56:11 [INF] Executed DbCommand (18ms) [Parameters=[@p3='?' (Size = 50), @p0='?' (Size = 300), @p1='?' (Size = 100), @p2='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (Size = 200), @p11='?' (Size = 256), @p12='?' (DbType = Int32), @p13='?' (Size = 100), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [CreatedBy] = @p1, [Name] = @p2
OUTPUT 1
WHERE [OrganizationId] = @p3;
INSERT INTO [Users] ([CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [OrganizationName], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
OUTPUT INSERTED.[UserId]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-02 21:56:11 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: 1
2026-01-02 21:56:11 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-02 21:56:11 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 3823.116ms
2026-01-02 21:56:11 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 21:56:11 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 3911.6224ms
2026-01-02 21:57:28 [INF] Application is shutting down...
2026-01-02 22:00:42 [INF] Now listening on: http://localhost:5201
2026-01-02 22:00:42 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 22:00:42 [INF] Hosting environment: Development
2026-01-02 22:00:42 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 22:02:19 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 22:02:19 [WRN] Failed to determine the https port for redirect.
2026-01-02 22:02:19 [INF] CORS policy execution successful.
2026-01-02 22:02:19 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 203.595ms
2026-01-02 22:02:19 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 111
2026-01-02 22:02:19 [INF] CORS policy execution successful.
2026-01-02 22:02:19 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 22:02:20 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 22:02:20 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:02:27 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:02:27 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:02:27 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 22:02:27 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 7071.5812ms
2026-01-02 22:02:27 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 22:02:27 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 7283.6491ms
2026-01-02 22:02:41 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-02 22:02:41 [INF] CORS policy execution successful.
2026-01-02 22:02:41 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 31.6915ms
2026-01-02 22:02:41 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 322
2026-01-02 22:02:41 [INF] CORS policy execution successful.
2026-01-02 22:02:41 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 22:02:42 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 22:02:42 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:02:45 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-02 22:02:45 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (Size = 50), @p0='?' (Size = 300), @p1='?' (Size = 100), @p2='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 150), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (Size = 200), @p11='?' (Size = 256), @p12='?' (DbType = Int32), @p13='?' (Size = 100), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [CreatedBy] = @p1, [Name] = @p2
OUTPUT 1
WHERE [OrganizationId] = @p3;
INSERT INTO [Users] ([CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [OrganizationName], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
OUTPUT INSERTED.[UserId]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-02 22:02:45 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: 2
2026-01-02 22:02:45 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-02 22:02:45 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 3531.9305ms
2026-01-02 22:02:45 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 22:02:45 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 3656.6758ms
2026-01-02 22:04:55 [INF] Application is shutting down...
2026-01-02 22:06:12 [INF] Now listening on: http://localhost:5201
2026-01-02 22:06:12 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 22:06:12 [INF] Hosting environment: Development
2026-01-02 22:06:12 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 22:07:57 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - null null
2026-01-02 22:07:58 [WRN] Failed to determine the https port for redirect.
2026-01-02 22:07:58 [INF] CORS policy execution successful.
2026-01-02 22:07:58 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/register-with-otp - 204 null null 222.5184ms
2026-01-02 22:07:58 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - application/json 139
2026-01-02 22:07:58 [INF] CORS policy execution successful.
2026-01-02 22:07:58 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 22:07:58 [INF] Route matched with {action = "RegisterWithOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterWithOtp(Kanini.Application.DTOs.Auth.RegisterWithOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 22:07:59 [INF] Registration OTP process started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:08:05 [INF] Email sent successfully to: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:08:05 [INF] Registration OTP sent successfully for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:08:05 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.OtpResponseDto'.
2026-01-02 22:08:05 [INF] Executed action Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api) in 7278.5241ms
2026-01-02 22:08:05 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.RegisterWithOtp (Kanini.Api)'
2026-01-02 22:08:05 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/register-with-otp - 200 null application/json; charset=utf-8 7567.6603ms
2026-01-02 22:08:17 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - null null
2026-01-02 22:08:17 [INF] CORS policy execution successful.
2026-01-02 22:08:17 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5201/api/auth/verify-registration-otp - 204 null null 20.6239ms
2026-01-02 22:08:17 [INF] Request starting HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - application/json 358
2026-01-02 22:08:17 [INF] CORS policy execution successful.
2026-01-02 22:08:17 [INF] Executing endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 22:08:17 [INF] Route matched with {action = "VerifyRegistrationOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyRegistrationOtp(Kanini.Application.DTOs.Auth.VerifyRegistrationOtpRequestDto) on controller Kanini.Api.Controllers.AuthController (Kanini.Api).
2026-01-02 22:08:17 [INF] Registration verification started for email: sujithkumarsenthilkumar777@gmail.com
2026-01-02 22:08:21 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 300), @p2='?' (Size = 200), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Organizations] ([OrganizationId], [ContactEmail], [ContactPhone], [CreatedBy], [CreatedOn], [IsActive], [Name], [Type], [UpdatedBy], [UpdatedOn])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-02 22:08:21 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (Size = 50), @p0='?' (Size = 300), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 500), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2), @p7='?' (Size = 150), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (Size = 200), @p12='?' (Size = 256), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Organizations] SET [ContactEmail] = @p0, [ContactPhone] = @p1, [CreatedBy] = @p2, [Name] = @p3
OUTPUT 1
WHERE [OrganizationId] = @p4;
INSERT INTO [Users] ([CreatedBy], [CreatedOn], [Email], [IsActive], [LastLogin], [OrganizationId], [OrganizationName], [PasswordHash], [Role], [UpdatedBy], [UpdatedOn])
OUTPUT INSERTED.[UserId]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-02 22:08:21 [INF] Registration verification completed for email: sujithkumarsenthilkumar777@gmail.com, UserId: 3
2026-01-02 22:08:21 [INF] Executing OkObjectResult, writing value of type 'Kanini.Application.DTOs.Auth.RegistrationResponseDto'.
2026-01-02 22:08:21 [INF] Executed action Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api) in 4343.615ms
2026-01-02 22:08:21 [INF] Executed endpoint 'Kanini.Api.Controllers.AuthController.VerifyRegistrationOtp (Kanini.Api)'
2026-01-02 22:08:21 [INF] Request finished HTTP/1.1 POST http://localhost:5201/api/auth/verify-registration-otp - 200 null application/json; charset=utf-8 4520.5713ms
2026-01-02 22:08:40 [INF] Application is shutting down...
2026-01-02 22:09:34 [INF] Now listening on: http://localhost:5201
2026-01-02 22:09:34 [INF] Application started. Press Ctrl+C to shut down.
2026-01-02 22:09:34 [INF] Hosting environment: Development
2026-01-02 22:09:34 [INF] Content root path: C:\Users\maste\Documents\Kanini\Fhir _PE\development\Kanini.Api
2026-01-02 22:10:26 [INF] Application is shutting down...
