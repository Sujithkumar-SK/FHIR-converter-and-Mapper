<div class="conversion-history">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-4">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading history...</span>
    </div>
  </div>

  <!-- History List -->
  <div *ngIf="!isLoading && conversions.length > 0">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>Job ID</th>
            <th>Status</th>
            <th>Patients</th>
            <th>Observations</th>
            <th>Completed</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let conversion of conversions">
            <td>
              <code class="small">{{conversion.jobId.substring(0, 8)}}...</code>
            </td>
            <td>
              <span [class]="getStatusBadgeClass(conversion.status)">
                {{ConversionStatusLabels[conversion.status]}}
              </span>
            </td>
            <td>{{conversion.patientsProcessed}}</td>
            <td>{{conversion.observationsProcessed}}</td>
            <td>
              <small *ngIf="conversion.completedAt" class="text-muted">
                {{conversion.completedAt | istDate:'short'}}
              </small>
              <span *ngIf="!conversion.completedAt" class="text-muted">-</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && conversions.length === 0" class="text-center py-4">
    <div class="text-muted">
      <i class="fas fa-history fa-3x mb-3"></i>
      <p>No conversions yet. Start by uploading a file above.</p>
    </div>
  </div>
</div>
